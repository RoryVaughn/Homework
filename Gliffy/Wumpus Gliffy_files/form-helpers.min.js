var module$form_helpers={};
(function(window){var FormHelpers=window.FormHelpers={};var DROP_DOWN_CARET="\x3cspan class\x3d'caret'\x3e\x3c/span\x3e";var DROP_DOWN_CLASS=" .dropdown-toggle";FormHelpers.dropDownTarget=null;FormHelpers.currentInput=null;FormHelpers.lastInputDateTime=null;FormHelpers.onDropDownKeyDown=function(event,hiddenFieldSelector){var selectedItem=null;if(event.target!=FormHelpers.dropDownTarget){FormHelpers.dropDownTarget=event.target;FormHelpers.currentInput="";FormHelpers.lastInputDateTime=Date.now()}if(event.keyCode>=
48&&event.keyCode<=57||event.keyCode>=65&&event.keyCode<=90){var containingElement=$(FormHelpers.dropDownTarget).parent();if(!$(containingElement).hasClass("open"))$(containingElement).addClass("open");var timeDifference=Date.now()-FormHelpers.lastInputDateTime;var character=String.fromCharCode(event.keyCode);if(timeDifference<=5E3)FormHelpers.currentInput+=character;else FormHelpers.currentInput=character;FormHelpers.lastInputDateTime=Date.now();var expression=new RegExp("^"+FormHelpers.currentInput.toLowerCase()+
".*$");var selectedItems=FormHelpers.findDropDownItem(expression,containingElement);if(selectedItems==null||selectedItems.length==0){FormHelpers.currentInput=character;expression=new RegExp("^"+FormHelpers.currentInput.toLowerCase()+".*$");selectedItems=FormHelpers.findDropDownItem(expression,containingElement)}if(selectedItems!=null&&selectedItems.length>0){$(containingElement).find("li a").removeClass("highlight");selectedItem=selectedItems[0];FormHelpers.scrollToItem(selectedItem,false)}}else if(event.keyCode==
38||event.keyCode==40){var currentItems=$(FormHelpers.dropDownTarget).parent().find(".highlight");if(currentItems.length>0){var currentItem=currentItems[0];if(event.keyCode===38&&$(currentItem).parent().prev().length>0){selectedItem=$(currentItem).parent().prev().find("a");$(currentItem).removeClass("highlight");FormHelpers.scrollToItem(selectedItem,true)}else if(event.keyCode===40&&$(currentItem).parent().next().length>0){selectedItem=$(currentItem).parent().next().find("a");$(currentItem).removeClass("highlight");
FormHelpers.scrollToItem(selectedItem,false)}}else{var searchTarget=$(FormHelpers.dropDownTarget).text();var searchExpression=new RegExp("^"+searchTarget.toLowerCase()+".*$");var targetItems=$(FormHelpers.dropDownTarget).parent().find("ul");var searchResult=FormHelpers.findDropDownItem(searchExpression,targetItems);var searchedItem=searchResult[0];if(event.keyCode===38&&$(searchedItem).parent().prev().length>0){selectedItem=$(searchedItem).parent().prev().find("a");$(targetItems).find(".highlight").removeClass("highlight");
FormHelpers.scrollToItem(previous,true)}else if(event.keyCode===40){if($(searchedItem).parent().next().length>0){selectedItem=$(searchedItem).parent().next().find("a");$(targetItems).find(".highlight").removeClass("highlight")}else searchedItem=targetItems.find("li").first().find("a");FormHelpers.scrollToItem(searchedItem,false)}}}else if(event.keyCode==13){var highlightedItems=$(FormHelpers.dropDownTarget).parent().find(".highlight");if(highlightedItems!=null&&highlightedItems.length>0){selectedItem=
highlightedItems[0];if($(selectedItem).hasClass("disabled"))return null;var dropDownSelector="#"+$(FormHelpers.dropDownTarget).parent().prop("id");dropDownSelector+=DROP_DOWN_CLASS;FormHelpers.updateDropDown(dropDownSelector,selectedItem)}}if(selectedItem!=null&&hiddenFieldSelector!=null){FormHelpers.updateHiddenField(hiddenFieldSelector,selectedItem);if($(selectedItem).data("index")!=null)return $(selectedItem).data("index")}return null};FormHelpers.scrollToItem=function(selectedItem,previousItem){var listItem=
$(selectedItem).parent();var top=$(listItem).position().top;if(top===0&&previousItem)top=$(listItem).height()*-1;var currentPosition=$(listItem).parent().prop("scrollTop");$(listItem).parent().prop("scrollTop",currentPosition+top);$(selectedItem).addClass("highlight")};FormHelpers.findDropDownItem=function(expression,element){var result=$(element).find("li a").filter(function(){if($(this).hasClass("disabled"))return false;var content=(this.textContent||this.innerText||"").toLowerCase();return content.match(expression)});
return result};FormHelpers.updateHiddenField=function(fieldSelector,element){var value="";if($(element)!="")value=$(element).val()!=""?$(element).val():$(element).html();$(fieldSelector).val(value)};FormHelpers.updateDropDown=function(selector,element){var index=$(element).data("index");var value=$(element).html();var dropDown=$(selector);dropDown.data("index",index);dropDown.html(value+DROP_DOWN_CARET)}})(window);